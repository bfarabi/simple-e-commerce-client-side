{"ast":null,"code":"var _jsxFileName = \"G:\\\\Simple React MS-7\\\\ema-jhon\\\\src\\\\component\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\n//in this project need for facebook sign in method by firebase.\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from './firebase.config';\nimport { useContext, useState } from 'react';\nimport { UserContext } from \"../../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfirebase.initializeApp(firebaseConfig);\n\nfunction Login() {\n  _s();\n\n  const [newUser, setNewUser] = useState(false);\n  const [user, setUser] = useState({\n    isSignedIn: false,\n    newUser: false,\n    name: '',\n    email: '',\n    password: '',\n    photo: '',\n    error: '',\n    success: false\n  });\n  const [loggedInUser, setLoggedInUser] = useContext(UserContext);\n  const provider = new firebase.auth.GoogleAuthProvider();\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\n\n  const handleSignIn = () => {\n    firebase.auth().signInWithPopup(provider).then(res => {\n      const {\n        displayName,\n        photoURL,\n        email\n      } = res.user;\n      const signedInUser = {\n        isSignedIn: true,\n        name: displayName,\n        email: email,\n        photo: photoURL\n      };\n      setUser(signedInUser);\n    }).catch(err => {\n      console.log(err);\n      console.log(err.message);\n    });\n  };\n\n  const handlefbSignIn = () => {\n    firebase.auth().signInWithPopup(fbProvider).then(result => {\n      /** @type {firebase.auth.OAuthCredential} */\n      var credential = result.credential; // The signed-in user info.\n\n      var user = result.user;\n      console.log('fb user after sign in', user); // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n\n      var accessToken = credential.accessToken; // ...\n    }).catch(error => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message; // The email of the user's account used.\n\n      var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n      var credential = error.credential; // ...\n    });\n  };\n\n  const handleSignOut = () => {\n    firebase.auth().signOut().then(res => {\n      const signedOutUser = {\n        isSignedIn: false,\n        name: \"\",\n        photo: \"\",\n        email: \"\"\n      };\n      setUser(signedOutUser);\n    }).catch(err => {});\n  };\n\n  const handleChange = e => {\n    let isFormValid = true;\n\n    if (e.target.name === 'email') {\n      isFormValid = /\\S+@\\S+\\.\\S+/.test(e.target.value);\n    }\n\n    if (e.target.name === 'password') {\n      const isPasswordValid = e.target.value.length > 6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFormValid = isPasswordValid && passwordHasNumber;\n    }\n\n    if (isFormValid) {\n      const newUserInfo = { ...user\n      };\n      newUserInfo[e.target.name] = e.target.value;\n      setUser(newUserInfo);\n    }\n  };\n\n  const handleSubmit = e => {\n    if (newUser && user.email && user.password) {\n      firebase.auth().createUserWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name); // ...\n      }).catch(error => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo); // ..\n      });\n    }\n\n    if (!newUser && user.email && user.password) {\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        setLoggedInUser(newUserInfo);\n        console.log(\"sign in info\", user.res); // ...\n      }).catch(function (error) {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n      });\n    }\n\n    e.preventDefault();\n  };\n\n  const updateUserName = name => {\n    const user = firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: name\n    }).then(() => {\n      // Update successful\n      console.log('update user name successfully');\n    }).catch(error => {\n      // An error occurred\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [user.isSignedIn ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onBlur: handleSignOut,\n      children: \"Sign out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 23\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onBlur: handleSignIn,\n      children: \"Sign in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlefbSignIn,\n      children: \" Sign in using Facebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, this), user.isSignedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome, \", user.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Your email: \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: user.photo,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 26\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \" Our own authentication\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      onChange: () => setNewUser(!newUser),\n      name: \"newUser\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"newUser\",\n      children: \"New user sign up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: [\" \", user.error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 5\n    }, this), user.success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: [\" user \", newUser ? 'created' : 'Logged In', \" successfully\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"\",\n      onSubmit: handleSubmit,\n      children: [newUser && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onBlur: handleChange,\n        name: \"name\",\n        placeholder: \"Write your name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onBlur: handleChange,\n        name: \"email\",\n        placeholder: \"Write your email\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        onBlur: handleChange,\n        name: \"password\",\n        placeholder: \"Password\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: newUser ? 'Sign up' : 'Sign In'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"CE/RLoYkudzlMaeHmxiOimjHktc=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["G:/Simple React MS-7/ema-jhon/src/component/Login/Login.js"],"names":["firebase","firebaseConfig","useContext","useState","UserContext","initializeApp","Login","newUser","setNewUser","user","setUser","isSignedIn","name","email","password","photo","error","success","loggedInUser","setLoggedInUser","provider","auth","GoogleAuthProvider","fbProvider","FacebookAuthProvider","handleSignIn","signInWithPopup","then","res","displayName","photoURL","signedInUser","catch","err","console","log","message","handlefbSignIn","result","credential","accessToken","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","handleChange","e","isFormValid","target","test","value","isPasswordValid","length","passwordHasNumber","newUserInfo","handleSubmit","createUserWithEmailAndPassword","updateUserName","signInWithEmailAndPassword","preventDefault","currentUser","updateProfile","color"],"mappings":"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","sourcesContent":["//in this project need for facebook sign in method by firebase.\r\n\r\n\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from './firebase.config';\r\nimport { useContext, useState } from 'react';\r\nimport { UserContext } from \"../../App\";\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nfunction Login() {\r\n\r\n  const [newUser, setNewUser]=useState(false);\r\nconst [user, setUser]=useState({\r\n  isSignedIn: false,\r\n  newUser: false,\r\n  name: '',\r\n  email:'',\r\n  password: '',\r\n  photo:'',\r\n  error:'',\r\n  success:false,\r\n})\r\n\r\nconst [loggedInUser, setLoggedInUser] = useContext(UserContext);\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\r\n  const handleSignIn=()=>{\r\n    firebase.auth().signInWithPopup(provider)\r\n    .then(res=>{\r\n      const {displayName, photoURL, email}=res.user;\r\n      const signedInUser={\r\n        isSignedIn:true,\r\n        name: displayName,\r\n        email:email,\r\n        photo: photoURL\r\n      }\r\n      setUser(signedInUser);\r\n    })\r\n    .catch(err=>{\r\n      console.log(err);\r\n      console.log(err.message);\r\n    })\r\n  }\r\n  const handlefbSignIn= ()=> {\r\n    firebase.auth()\r\n  .signInWithPopup(fbProvider)\r\n  .then((result) => {\r\n    /** @type {firebase.auth.OAuthCredential} */\r\n    var credential = result.credential;\r\n\r\n    // The signed-in user info.\r\n    var user = result.user;\r\n    console.log('fb user after sign in',user);\r\n    // This gives you a Facebook Access Token. You can use it to access the Facebook API.\r\n    var accessToken = credential.accessToken;\r\n\r\n    // ...\r\n  })\r\n  .catch((error) => {\r\n    // Handle Errors here.\r\n    var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n    // The email of the user's account used.\r\n    var email = error.email;\r\n    // The firebase.auth.AuthCredential type that was used.\r\n    var credential = error.credential;\r\n\r\n    // ...\r\n  });\r\n  }\r\n\r\n  const handleSignOut= () => {\r\n    firebase.auth().signOut()\r\n    .then (res=> {\r\n      const signedOutUser={\r\n        isSignedIn:false,\r\n        name:\"\",\r\n        photo: \"\" ,\r\n        email: \"\",\r\n      }\r\n      setUser(signedOutUser);\r\n    })\r\n    .catch(err=>{\r\n\r\n    })\r\n  }\r\n  const handleChange =(e) =>{\r\n    \r\n   let isFormValid=true;\r\n    if (e.target.name==='email'){\r\n      isFormValid = /\\S+@\\S+\\.\\S+/.test(e.target.value);\r\n      \r\n    }\r\n    if(e.target.name ==='password'){\r\n      const isPasswordValid = e.target.value.length > 6 ;\r\n      const passwordHasNumber=/\\d{1}/.test(e.target.value);\r\n      isFormValid= isPasswordValid && passwordHasNumber;\r\n      \r\n    }\r\n    if(isFormValid){\r\n      const newUserInfo={...user};\r\n      newUserInfo[e.target.name] = e.target.value;\r\n      setUser(newUserInfo);\r\n    }\r\n  }\r\n  const handleSubmit=(e)=>{\r\n    if(newUser && user.email && user.password){\r\n      firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\r\n  .then(res => {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = '';\r\n    newUserInfo.success=true;\r\n    setUser(newUserInfo);\r\n    updateUserName(user.name);\r\n    // ...\r\n  })\r\n  .catch((error) => {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = error.message;\r\n    newUserInfo.success=false;\r\n    setUser(newUserInfo);\r\n    // ..\r\n  });\r\n\r\n    }\r\n    if(!newUser && user.email && user.password){\r\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password)\r\n  .then(res => {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = '';\r\n    newUserInfo.success=true;\r\n    setUser(newUserInfo);\r\n    setLoggedInUser(newUserInfo)\r\n    console.log(\"sign in info\" , user.res);\r\n    // ...\r\n  })\r\n  .catch(function(error) {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = error.message;\r\n    newUserInfo.success=false;\r\n    setUser(newUserInfo);\r\n  });\r\n    }\r\n\r\n    e.preventDefault();\r\n  }\r\n  const updateUserName = name =>{\r\n    const user = firebase.auth().currentUser;\r\n\r\nuser.updateProfile({\r\n  displayName: name\r\n  \r\n}).then(() => {\r\n  // Update successful\r\n  console.log('update user name successfully');\r\n}).catch((error) => {\r\n  // An error occurred\r\n  console.log(error);\r\n});  \r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      \r\n    {\r\n      user.isSignedIn?<button onBlur={handleSignOut}>Sign out</button>:\r\n      <button onBlur={handleSignIn}>Sign in</button>\r\n    }\r\n    <br />\r\n    <button onClick={handlefbSignIn}> Sign in using Facebook</button>\r\n    {\r\n      user.isSignedIn && <div>\r\n        <p>Welcome, {user.name}</p>\r\n        <p>Your email: {user.email}</p>\r\n        <img src={user.photo} alt=\"\" />\r\n      </div>\r\n    }\r\n    <h1> Our own authentication</h1>\r\n    <input type=\"checkbox\" onChange={()=> setNewUser(!newUser)} name=\"newUser\" />\r\n    <label htmlFor=\"newUser\" >New user sign up</label>\r\n    \r\n    <p style={{color:'red'}}> {user.error}</p>\r\n    {user.success && <p style={{color:'green'}}> user {newUser? 'created' : 'Logged In'} successfully</p>}\r\n\r\n    <form action=\"\"  onSubmit={handleSubmit} >\r\n\r\n      {newUser && <input type=\"text\" onBlur={handleChange} name=\"name\" placeholder='Write your name' />}\r\n        <br />\r\n      <input type=\"text\" onBlur={handleChange} name=\"email\" placeholder='Write your email' required />\r\n      <br />\r\n      <input type=\"password\" onBlur={handleChange} name=\"password\" placeholder='Password' required />\r\n      <br />\r\n      <input type=\"submit\" value={newUser? 'Sign up' : 'Sign In'} />\r\n    </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}