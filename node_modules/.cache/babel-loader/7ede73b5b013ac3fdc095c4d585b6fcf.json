{"ast":null,"code":"import _slicedToArray from\"G:/Simple React MS-7/ema-jhon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{getCart,processOrder,removeFromCart}from'../../utilities/databaseManager';import Cart from'../Cart/Cart';import ReviewItem from'../ReviewItem/ReviewItem';import happyImage from\"../../images/giphy.gif\";import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Review=function Review(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),orderPlace=_useState4[0],setOrderPlace=_useState4[1];var history=useHistory();document.title='Review order';var handleProceedCheckout=function handleProceedCheckout(){history.push('/shipment');};var removeProduct=function removeProduct(productKey){console.log('remove clicked',productKey);var newCart=cart.filter(function(pd){return pd.key!==productKey;});setCart(newCart);removeFromCart(productKey);};useEffect(function(){//cart\nvar savedCart=getCart();//instead of getDatabaseCart\nvar productKeys=Object.keys(savedCart);fetch('https://serene-wave-85583.herokuapp.com/productByKeys',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(productKeys)}).then(function(res){return res.json();}).then(function(data){return setCart(data);});},[]);var thankYou;if(orderPlace){thankYou=/*#__PURE__*/_jsx(\"img\",{src:happyImage});}return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-container\",children:[cart.map(function(pd){return/*#__PURE__*/_jsx(ReviewItem,{removeProduct:removeProduct,product:pd},pd.key);}),thankYou]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,children:/*#__PURE__*/_jsx(\"button\",{onClick:handleProceedCheckout,className:\"main-button\",children:\" Proceed Checkout\"})})})]});};export default Review;","map":{"version":3,"sources":["G:/Simple React MS-7/ema-jhon/src/component/Review/Review.js"],"names":["React","useEffect","useState","getCart","processOrder","removeFromCart","Cart","ReviewItem","happyImage","useHistory","Review","cart","setCart","orderPlace","setOrderPlace","history","document","title","handleProceedCheckout","push","removeProduct","productKey","console","log","newCart","filter","pd","key","savedCart","productKeys","Object","keys","fetch","method","headers","body","JSON","stringify","then","res","json","data","thankYou","map"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,CAAkBC,YAAlB,CAAgCC,cAAhC,KAAsD,iCAAtD,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAGA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,eACKR,QAAQ,CAAC,EAAD,CADb,wCACVS,IADU,eACJC,OADI,8BAEkBV,QAAQ,CAAC,KAAD,CAF1B,yCAEVW,UAFU,eAEEC,aAFF,eAGjB,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CACAO,QAAQ,CAACC,KAAT,CAAe,cAAf,CACA,GAAMC,CAAAA,qBAAqB,CAAE,QAAvBA,CAAAA,qBAAuB,EAAM,CAC/BH,OAAO,CAACI,IAAR,CAAa,WAAb,EACH,CAFD,CAGA,GAAMC,CAAAA,aAAa,CAAE,QAAfA,CAAAA,aAAe,CAACC,UAAD,CAAc,CAC/BC,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BF,UAA9B,EACA,GAAMG,CAAAA,OAAO,CAAGb,IAAI,CAACc,MAAL,CAAY,SAAAC,EAAE,QAAEA,CAAAA,EAAE,CAACC,GAAH,GAAWN,UAAb,EAAd,CAAhB,CACAT,OAAO,CAACY,OAAD,CAAP,CACAnB,cAAc,CAACgB,UAAD,CAAd,CACH,CALD,CAMApB,SAAS,CAAC,UAAI,CACV;AACA,GAAM2B,CAAAA,SAAS,CAAGzB,OAAO,EAAzB,CAA6B;AAC7B,GAAM0B,CAAAA,WAAW,CAAEC,MAAM,CAACC,IAAP,CAAYH,SAAZ,CAAnB,CAEAI,KAAK,CAAC,uDAAD,CAA0D,CAC3DC,MAAM,CAAE,MADmD,CAE3DC,OAAO,CAAE,CACL,eAAe,kBADV,CAFkD,CAK3DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,WAAf,CALqD,CAA1D,CAAL,CAOCS,IAPD,CAOM,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAPT,EAQCF,IARD,CAQM,SAAAG,IAAI,QAAI7B,CAAAA,OAAO,CAAC6B,IAAD,CAAX,EARV,EAUH,CAfQ,CAeP,EAfO,CAAT,CAgBA,GAAIC,CAAAA,QAAJ,CACA,GAAG7B,UAAH,CAAc,CACV6B,QAAQ,cAAE,YAAK,GAAG,CAAElC,UAAV,EAAV,CACH,CAGD,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,aAAK,SAAS,CAAC,mBAAf,WAEGG,IAAI,CAACgC,GAAL,CAAS,SAAAjB,EAAE,qBAAI,KAAC,UAAD,EAEd,aAAa,CAAEN,aAFD,CAGd,OAAO,CAAEM,EAHK,EACTA,EAAE,CAACC,GADM,CAAJ,EAAX,CAFH,CASIe,QATJ,GADJ,cAaA,YAAK,SAAS,CAAC,gBAAf,uBACI,KAAC,IAAD,EAAM,IAAI,CAAE/B,IAAZ,uBACA,eAAQ,OAAO,CAAEO,qBAAjB,CAAwC,SAAS,CAAC,aAAlD,+BADA,EADJ,EAbA,GADJ,CAyBH,CA7DD,CA+DA,cAAeR,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getCart, processOrder, removeFromCart } from '../../utilities/databaseManager';\r\nimport Cart from '../Cart/Cart';\r\nimport ReviewItem from '../ReviewItem/ReviewItem';\r\n\r\nimport happyImage from \"../../images/giphy.gif\";\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nconst Review = () => {\r\n    const [cart, setCart]=useState([]);\r\n    const [orderPlace, setOrderPlace]= useState(false);\r\n    const history = useHistory()\r\n    document.title='Review order'\r\n    const handleProceedCheckout= () => {\r\n        history.push('/shipment');\r\n    }\r\n    const removeProduct= (productKey)=>{\r\n        console.log('remove clicked', productKey);\r\n        const newCart = cart.filter(pd=>pd.key !== productKey);\r\n        setCart(newCart);\r\n        removeFromCart(productKey);\r\n    }\r\n    useEffect(()=>{\r\n        //cart\r\n        const savedCart = getCart(); //instead of getDatabaseCart\r\n        const productKeys= Object.keys(savedCart);\r\n\r\n        fetch('https://serene-wave-85583.herokuapp.com/productByKeys', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type':'application/json'\r\n            },\r\n            body: JSON.stringify(productKeys)\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => setCart(data))\r\n        \r\n    },[])\r\n    let thankYou ;\r\n    if(orderPlace){\r\n        thankYou= <img src={happyImage}></img>\r\n    }\r\n     \r\n\r\n    return (\r\n        <div className='shop-container'>\r\n            <div className='product-container'>\r\n            {\r\n               cart.map(pd => <ReviewItem \r\n                key={pd.key}\r\n                removeProduct={removeProduct}\r\n                product={pd}></ReviewItem> )\r\n                \r\n            }\r\n            {\r\n                thankYou\r\n            }\r\n        </div>\r\n        <div className='cart-container'>\r\n            <Cart cart={cart}>\r\n            <button onClick={handleProceedCheckout} className=\"main-button\"> Proceed Checkout</button>\r\n            </Cart>\r\n\r\n        </div>\r\n        \r\n        \r\n        </div>\r\n        \r\n    );\r\n};\r\n\r\nexport default Review;"]},"metadata":{},"sourceType":"module"}