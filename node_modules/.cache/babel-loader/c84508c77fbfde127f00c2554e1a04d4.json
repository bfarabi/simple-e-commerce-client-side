{"ast":null,"code":"import _toConsumableArray from\"G:/Simple React MS-7/ema-jhon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"G:/Simple React MS-7/ema-jhon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import\"./Shop.css\";import Product from'../Product/Product';import Cart from'../Cart/Cart';import{addToCart,getCart}from'../../utilities/databaseManager';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){//const first10 = fakeData.slice(0,10);\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];document.title='Shop more';useEffect(function(){fetch('https://serene-wave-85583.herokuapp.com/products').then(function(res){return res.json();}).then(function(data){return setProducts(data);});},[]);useEffect(function(){var savedCart=getCart();var productKeys=Object.keys(savedCart);fetch('https://serene-wave-85583.herokuapp.com/productByKeys',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(productKeys)}).then(function(res){return res.json();}).then(function(data){return setCart(data);});},[]);var handleAddProduct=function handleAddProduct(product){var toBeAddedKey=product.key;var sameProduct=cart.find(function(pd){return pd.key===toBeAddedKey;});var count=1;var newCart;if(sameProduct){count=sameProduct.quantity+1;sameProduct.quantity=count;var others=cart.filter(function(pd){return pd.key!==toBeAddedKey;});newCart=[].concat(_toConsumableArray(others),[sameProduct]);}else{product.quantity=1;newCart=[].concat(_toConsumableArray(cart),[product]);}setCart(newCart);addToCart(product.key,count);};return/*#__PURE__*/_jsxs(\"div\",{class:\"shop-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-container\",children:[products.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"loading...\"}),products.map(function(pd){return/*#__PURE__*/_jsx(Product,{showAddToCart:true,handleAddProduct:handleAddProduct,product:pd},pd.key);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,children:/*#__PURE__*/_jsx(Link,{to:\"/review\",children:/*#__PURE__*/_jsx(\"button\",{className:\"main-button\",children:\"Review Order\"})})})})]});};export default Shop;","map":{"version":3,"sources":["G:/Simple React MS-7/ema-jhon/src/component/Shop/Shop.js"],"names":["React","useEffect","useState","Product","Cart","addToCart","getCart","Link","Shop","products","setProducts","cart","setCart","document","title","fetch","then","res","json","data","savedCart","productKeys","Object","keys","method","headers","body","JSON","stringify","handleAddProduct","product","toBeAddedKey","key","sameProduct","find","pd","count","newCart","quantity","others","filter","length","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport \"./Shop.css\";\r\nimport Product from '../Product/Product';\r\nimport Cart from '../Cart/Cart';\r\nimport { addToCart, getCart } from '../../utilities/databaseManager';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nconst Shop = () => {\r\n    //const first10 = fakeData.slice(0,10);\r\n    const [products, setProducts] = useState([]);\r\n    const [cart, setCart] = useState([]);\r\n    document.title='Shop more';\r\n\r\n    useEffect(() => {\r\n       fetch('https://serene-wave-85583.herokuapp.com/products')\r\n       .then(res => res.json())\r\n       .then(data => setProducts(data))\r\n    }, []);\r\n    \r\n    useEffect(()=>{\r\n        const savedCart = getCart();\r\n        const productKeys= Object.keys(savedCart);\r\n        fetch('https://serene-wave-85583.herokuapp.com/productByKeys', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type':'application/json'\r\n            },\r\n            body: JSON.stringify(productKeys)\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => setCart(data))\r\n    },[])\r\n    const handleAddProduct = (product) => {\r\n        const toBeAddedKey = product.key;\r\n        const sameProduct = cart.find(pd => pd.key === toBeAddedKey);\r\n\r\n        let count =1 ;\r\n        let newCart;\r\n        if(sameProduct){\r\n            count = sameProduct.quantity + 1;\r\n            sameProduct.quantity = count ;\r\n            const others = cart.filter(pd=>pd.key !== toBeAddedKey);\r\n            newCart=[...others, sameProduct];\r\n        }\r\n        else{\r\n            product.quantity = 1 ;\r\n             newCart = [...cart , product];\r\n        }\r\n        setCart(newCart);\r\n        \r\n        \r\n        addToCart(product.key, count);\r\n        \r\n    }\r\n    \r\n    return (\r\n    \r\n        <div class='shop-container' >\r\n            <div className=\"product-container\">\r\n                {\r\n                    products.length === 0 && <p>loading...</p>\r\n                }\r\n            \r\n            {\r\n                products.map(pd => <Product\r\n                key={pd.key}\r\n                showAddToCart={true}\r\n                    handleAddProduct = {handleAddProduct}\r\n                product={pd} > \r\n                \r\n                </Product>)\r\n            }\r\n            \r\n            </div>\r\n            <div className=\"cart-container\">\r\n            <Cart cart={cart} >\r\n            <Link to=\"/review\"> \r\n            <button className=\"main-button\">Review Order</button></Link>\r\n            </Cart>\r\n\r\n            </div>\r\n            \r\n        </div>\r\n\r\n    );\r\n};\r\n\r\nexport default Shop;"]},"metadata":{},"sourceType":"module"}