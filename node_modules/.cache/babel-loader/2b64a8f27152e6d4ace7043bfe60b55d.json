{"ast":null,"code":"import _objectSpread from\"G:/Simple React MS-7/ema-jhon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"G:/Simple React MS-7/ema-jhon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//in this project need for facebook sign in method by firebase.\nimport firebase from\"firebase/app\";import\"firebase/auth\";import firebaseConfig from'./firebase.config';import{useContext,useState}from'react';import{UserContext}from\"../../App\";import{useHistory}from\"react-router-dom\";import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";firebase.initializeApp(firebaseConfig);function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),newUser=_useState2[0],setNewUser=_useState2[1];document.title=\"Manage Inventory\";var _useState3=useState({isSignedIn:false,newUser:false,name:'',email:'',password:'',photo:'',error:'',success:false}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),loggedInUser=_useContext2[0],setLoggedInUser=_useContext2[1];var history=useHistory();var location=useLocation();var _ref=location.state||{from:{pathname:\"/\"}},from=_ref.from;var provider=new firebase.auth.GoogleAuthProvider();var fbProvider=new firebase.auth.FacebookAuthProvider();var handleSignIn=function handleSignIn(){firebase.auth().signInWithPopup(provider).then(function(res){var _res$user=res.user,displayName=_res$user.displayName,photoURL=_res$user.photoURL,email=_res$user.email;var signedInUser={isSignedIn:true,name:displayName,email:email,photo:photoURL};setUser(signedInUser);}).catch(function(err){console.log(err);console.log(err.message);});};var handlefbSignIn=function handlefbSignIn(){firebase.auth().signInWithPopup(fbProvider).then(function(result){/** @type {firebase.auth.OAuthCredential} */var credential=result.credential;var user=result.user;console.log('fb user after sign in',user);var accessToken=credential.accessToken;// ...\n}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;var email=error.email;var credential=error.credential;// ...\n});};var handleSignOut=function handleSignOut(){firebase.auth().signOut().then(function(res){var signedOutUser={isSignedIn:false,name:\"\",photo:\"\",email:\"\"};setUser(signedOutUser);}).catch(function(err){});};var handleChange=function handleChange(e){var isFormValid=true;if(e.target.name==='email'){isFormValid=/\\S+@\\S+\\.\\S+/.test(e.target.value);}if(e.target.name==='password'){var isPasswordValid=e.target.value.length>6;var passwordHasNumber=/\\d{1}/.test(e.target.value);isFormValid=isPasswordValid&&passwordHasNumber;}if(isFormValid){var newUserInfo=_objectSpread({},user);newUserInfo[e.target.name]=e.target.value;setUser(newUserInfo);}};var handleSubmit=function handleSubmit(e){if(newUser&&user.email&&user.password){firebase.auth().createUserWithEmailAndPassword(user.email,user.password).then(function(res){var newUserInfo=_objectSpread({},user);newUserInfo.error='';newUserInfo.success=true;setUser(newUserInfo);updateUserName(user.name);// ...\n}).catch(function(error){var newUserInfo=_objectSpread({},user);newUserInfo.error=error.message;newUserInfo.success=false;setUser(newUserInfo);// ..\n});}if(!newUser&&user.email&&user.password){firebase.auth().signInWithEmailAndPassword(user.email,user.password).then(function(res){var newUserInfo=_objectSpread({},user);newUserInfo.error='';newUserInfo.success=true;setUser(newUserInfo);setLoggedInUser(newUserInfo);history.replace(from);console.log(\"sign in info\",user.res);// ...\n}).catch(function(error){var newUserInfo=_objectSpread({},user);newUserInfo.error=error.message;newUserInfo.success=false;setUser(newUserInfo);});}e.preventDefault();};var updateUserName=function updateUserName(name){var user=firebase.auth().currentUser;user.updateProfile({displayName:name}).then(function(){// Update successful\nconsole.log('update user name successfully');}).catch(function(error){// An error occurred\nconsole.log(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[user.isSignedIn?/*#__PURE__*/_jsx(\"button\",{onBlur:handleSignOut,children:\"Sign out\"}):/*#__PURE__*/_jsx(\"button\",{onBlur:handleSignIn,children:\"Sign in\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handlefbSignIn,children:\" Sign in using Facebook\"}),user.isSignedIn&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Your email: \",user.email]}),/*#__PURE__*/_jsx(\"img\",{src:user.photo,alt:\"\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\" Our own authentication\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:function onChange(){return setNewUser(!newUser);},name:\"newUser\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newUser\",children:\"New user sign up\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[\" \",user.error]}),user.success&&/*#__PURE__*/_jsxs(\"p\",{style:{color:'green'},children:[\" user \",newUser?'created':'Logged In',\" successfully\"]}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,children:[newUser&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",onBlur:handleChange,name:\"name\",placeholder:\"Write your name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onBlur:handleChange,name:\"email\",placeholder:\"Write your email\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onBlur:handleChange,name:\"password\",placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:newUser?'Sign up':'Sign In'})]})]});}export default Login;","map":{"version":3,"sources":["G:/Simple React MS-7/ema-jhon/src/component/Login/Login.js"],"names":["firebase","firebaseConfig","useContext","useState","UserContext","useHistory","useLocation","initializeApp","Login","newUser","setNewUser","document","title","isSignedIn","name","email","password","photo","error","success","user","setUser","loggedInUser","setLoggedInUser","history","location","state","from","pathname","provider","auth","GoogleAuthProvider","fbProvider","FacebookAuthProvider","handleSignIn","signInWithPopup","then","res","displayName","photoURL","signedInUser","catch","err","console","log","message","handlefbSignIn","result","credential","accessToken","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","handleChange","e","isFormValid","target","test","value","isPasswordValid","length","passwordHasNumber","newUserInfo","handleSubmit","createUserWithEmailAndPassword","updateUserName","signInWithEmailAndPassword","replace","preventDefault","currentUser","updateProfile","color"],"mappings":"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","sourcesContent":["//in this project need for facebook sign in method by firebase.\r\n\r\n\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from './firebase.config';\r\nimport { useContext, useState } from 'react';\r\nimport { UserContext } from \"../../App\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nfunction Login() {\r\n\r\n  const [newUser, setNewUser]=useState(false);\r\n  document.title = \"Manage Inventory\";\r\nconst [user, setUser]=useState({\r\n  isSignedIn: false,\r\n  newUser: false,\r\n  name: '',\r\n  email:'',\r\n  password: '',\r\n  photo:'',\r\n  error:'',\r\n  success:false,\r\n})\r\n\r\nconst [loggedInUser, setLoggedInUser] = useContext(UserContext);\r\nconst history = useHistory();\r\n    const location = useLocation();\r\n\r\n    let { from } = location.state || { from: { pathname: \"/\" } };\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\r\n  const handleSignIn=()=>{\r\n    firebase.auth().signInWithPopup(provider)\r\n    .then(res=>{\r\n      const {displayName, photoURL, email}=res.user;\r\n      const signedInUser={\r\n        isSignedIn:true,\r\n        name: displayName,\r\n        email:email,\r\n        photo: photoURL\r\n      }\r\n      setUser(signedInUser);\r\n    })\r\n    .catch(err=>{\r\n      console.log(err);\r\n      console.log(err.message);\r\n    })\r\n  }\r\n  const handlefbSignIn= ()=> {\r\n    firebase.auth()\r\n  .signInWithPopup(fbProvider)\r\n  .then((result) => {\r\n    /** @type {firebase.auth.OAuthCredential} */\r\n    var credential = result.credential;\r\n    var user = result.user;\r\n    console.log('fb user after sign in',user);\r\n    var accessToken = credential.accessToken;\r\n\r\n    // ...\r\n  })\r\n  .catch((error) => {\r\n    var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n    var email = error.email;\r\n    var credential = error.credential;\r\n\r\n    // ...\r\n  });\r\n  }\r\n\r\n  const handleSignOut= () => {\r\n    firebase.auth().signOut()\r\n    .then (res=> {\r\n      const signedOutUser={\r\n        isSignedIn:false,\r\n        name:\"\",\r\n        photo: \"\" ,\r\n        email: \"\",\r\n      }\r\n      setUser(signedOutUser);\r\n    })\r\n    .catch(err=>{\r\n\r\n    })\r\n  }\r\n  const handleChange =(e) =>{\r\n    \r\n   let isFormValid=true;\r\n    if (e.target.name==='email'){\r\n      isFormValid = /\\S+@\\S+\\.\\S+/.test(e.target.value);\r\n      \r\n    }\r\n    if(e.target.name ==='password'){\r\n      const isPasswordValid = e.target.value.length > 6 ;\r\n      const passwordHasNumber=/\\d{1}/.test(e.target.value);\r\n      isFormValid= isPasswordValid && passwordHasNumber;\r\n      \r\n    }\r\n    if(isFormValid){\r\n      const newUserInfo={...user};\r\n      newUserInfo[e.target.name] = e.target.value;\r\n      setUser(newUserInfo);\r\n    }\r\n  }\r\n  const handleSubmit=(e)=>{\r\n    if(newUser && user.email && user.password){\r\n      firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\r\n  .then(res => {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = '';\r\n    newUserInfo.success=true;\r\n    setUser(newUserInfo);\r\n    updateUserName(user.name);\r\n    // ...\r\n  })\r\n  .catch((error) => {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = error.message;\r\n    newUserInfo.success=false;\r\n    setUser(newUserInfo);\r\n    // ..\r\n  });\r\n\r\n    }\r\n    if(!newUser && user.email && user.password){\r\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password)\r\n  .then(res => {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = '';\r\n    newUserInfo.success=true;\r\n    setUser(newUserInfo);\r\n    setLoggedInUser(newUserInfo);\r\n    history.replace(from);\r\n    console.log(\"sign in info\" , user.res);\r\n    // ...\r\n  })\r\n  .catch(function(error) {\r\n    const newUserInfo ={...user};\r\n    newUserInfo.error = error.message;\r\n    newUserInfo.success=false;\r\n    setUser(newUserInfo);\r\n  });\r\n    }\r\n\r\n    e.preventDefault();\r\n  }\r\n  const updateUserName = name =>{\r\n    const user = firebase.auth().currentUser;\r\n\r\nuser.updateProfile({\r\n  displayName: name\r\n  \r\n}).then(() => {\r\n  // Update successful\r\n  console.log('update user name successfully');\r\n}).catch((error) => {\r\n  // An error occurred\r\n  console.log(error);\r\n});  \r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      \r\n    {\r\n      user.isSignedIn?<button onBlur={handleSignOut}>Sign out</button>:\r\n      <button onBlur={handleSignIn}>Sign in</button>\r\n    }\r\n    <br />\r\n    <button onClick={handlefbSignIn}> Sign in using Facebook</button>\r\n    {\r\n      user.isSignedIn && <div>\r\n        <p>Welcome, {user.name}</p>\r\n        <p>Your email: {user.email}</p>\r\n        <img src={user.photo} alt=\"\" />\r\n      </div>\r\n    }\r\n    <h1> Our own authentication</h1>\r\n    <input type=\"checkbox\" onChange={()=> setNewUser(!newUser)} name=\"newUser\" />\r\n    <label htmlFor=\"newUser\" >New user sign up</label>\r\n    \r\n    <p style={{color:'red'}}> {user.error}</p>\r\n    {user.success && <p style={{color:'green'}}> user {newUser? 'created' : 'Logged In'} successfully</p>}\r\n\r\n    <form action=\"\"  onSubmit={handleSubmit} >\r\n\r\n      {newUser && <input type=\"text\" onBlur={handleChange} name=\"name\" placeholder='Write your name' />}\r\n        <br />\r\n      <input type=\"text\" onBlur={handleChange} name=\"email\" placeholder='Write your email' required />\r\n      <br />\r\n      <input type=\"password\" onBlur={handleChange} name=\"password\" placeholder='Password' required />\r\n      <br />\r\n      <input type=\"submit\" value={newUser? 'Sign up' : 'Sign In'} />\r\n    </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}